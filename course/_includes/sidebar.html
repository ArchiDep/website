<div class='w-80 max-w-full bg-base-200 text-base-content min-h-full pb-16'>
  <div class='lg:hidden w-full flex justify-between items-center pl-6 pr-2 pt-4'>
    <a href='/' class='text-xl font-bold inline'>
      <div class='flex items-center gap-x-2'>
        <div class='avatar'>
          <div class='w-10'>
            <img src='{{ "/favicons/archidep-rocket-192.png" | relative_url }}' alt='ArchiDep logo'>
          </div>
        </div>
        <span class='font-title'>ArchiDep</span>
      </div>
    </a>
    <label for='sidebar' class='btn btn-square btn-ghost'>
      {%- include icons/x-mark.html class="size-5" -%}
    </label>
  </div>
  <div class='px-4'>
    <ul class='menu menu-horizontal grid grid-cols-5 gap-2'>
      <li>
        {% if page.url == '/' %}
          {% assign home_background = 'bg-primary/50' %}
        {% endif %}
        <a href='{{ "/" | relative_url }}' class='{{ home_background }} tooltip tooltip-bottom' data-tip='Course'>
          {%- include icons/home.html class="w-full" -%}
          <span class='sr-only'>Course</span>
        </a>
      </li>
      {% unless site.archidep_standalone %}
        <li>
          <a href='/app' class='tooltip tooltip-bottom' data-tip='Dashboard'>
            {%- include icons/cube.html class="w-full" -%}
            <span class='sr-only'>Dashboard</span>
          </a>
        </li>
        <li>
          <a href='/admin' id='sidebar-admin-item' class='hidden tooltip tooltip-bottom' data-tip='Admin'>
            {%- include icons/fire.html class="text-error w-full" -%}
            <span class='sr-only'>Admin</span>
          </a>
        </li>
      {% endunless %}
    </ul>
  </div>
  <ul class='w-full menu px-4 pt-0 pb-4'>
    {%- for section in site.data.course.sections -%}
      {%- assign current_section = forloop.index -%}
      {% if section.progress == 'done' %}
        {% assign section_color = 'border-r-4 border-success/50 hover:border-success' %}
      {% elsif section.progress == 'next' %}
        {% assign section_color = 'border-r-4 border-info/50 hover:border-info' %}
      {% else %}
        {% assign section_color = '' %}
      {% endif %}
      <li class='{{ section_color }} peer/section-{{ forloop.index }} group/section-{{ forloop.index }}'>
        <label for='section-{{ section.slug }}-toggle' class='flex justify-between items-center'>
          <span class='text-base-content/50'>{{ section.title }}</span>
          {% if section.open == false %}
            <span class='group-has-checked/section-{{ current_section }}:hidden'>
              {%- include icons/chevron-down.html class="size-4 text-base-content/50" -%}
            </span>
            <span class='hidden group-has-checked/section-{{ current_section }}:inline'>
              {%- include icons/chevron-up.html class="size-4 text-base-content/50" -%}
            </span>
          {% endif %}
          <input
            type='checkbox'
            id='section-{{ section.slug }}-toggle'
            class='hidden'
            {% if section.open %}
              checked disabled
            {% elsif page.section_num == section.num %}
              checked
            {% endif %}
          >
        </label>
      </li>
      {%- for item in section.items -%}
        {% if item.url == page.url %}
          {% assign current_background = 'bg-neutral/25 dark:bg-neutral' %}
          {% assign current_font_weight = 'font-bold' %}
        {% else %}
          {% assign current_background = '' %}
          {% assign current_font_weight = '' %}
        {% endif %}

        {% if item.progress == 'done' %}
          {% if item.url == page.url %}
            {% assign chapter_color = 'border-r-4 border-success' %}
          {% else %}
            {% assign chapter_color = 'border-r-4 border-success/50 hover:border-success' %}
          {% endif %}
        {% elsif item.progress == 'due' %}
          {% if item.url == page.url %}
            {% assign chapter_color = 'border-r-4 border-warning' %}
          {% else %}
            {% assign chapter_color = 'border-r-4 border-warning/85 hover:border-warning' %}
          {% endif %}
        {% elsif item.progress == 'next' %}
          {% if item.url == page.url %}
            {% assign chapter_color = 'border-r-4 border-info' %}
          {% else %}
            {% assign chapter_color = 'border-r-4 border-info/50 hover:border-info' %}
          {% endif %}
        {% elsif item.url == page.url %}
          {% assign chapter_color = '' %}
        {% else %}
          {% assign chapter_color = 'opacity-25 hover:opacity-100' %}
        {% endif %}

        <li class='group {{ current_background }} {{ chapter_color }} hidden peer-has-checked/section-{{ current_section }}:flex'>
          {% if item.course_type == 'slides' %}
            {% assign link_target = '_blank' %}
          {% else %}
            {% assign link_target = '_self' %}
          {% endif %}

          <a
            href='{{ item.url | relative_url }}'
            target='{{ link_target }}'
            class='flex items-center gap-2 {{ current_font_weight }}'
          >
            {%- include chapter-title.html doc=item -%}
            {% if item.slides %}
              <span> ðŸŽ¬ </span>
            {% endif %}
            {% if item.course_type == 'slides' %}
              {%- include icons/arrow-top-right-on-square.html class="size-4 text-base-content/25 group-hover:text-base-content/75" -%}
            {% endif %}
          </a>
        </li>
      {%- endfor -%}
    {%- endfor -%}
    <li>
      <span class='text-base-content/50 cursor-default'>Cheatsheets</span>
    </li>
    {%- for item in site.cheatsheets -%}
      {% if item.url == page.url %}
        {% assign current_background = 'bg-neutral/25 dark:bg-neutral' %}
        {% assign current_font_weight = 'font-bold' %}
      {% else %}
        {% assign current_background = '' %}
        {% assign current_font_weight = '' %}
      {% endif %}

      <li class='{{ current_background }}'>
        <a
          href='{{ item.url | relative_url }}'
          class='flex items-center gap-2 {{ current_font_weight }}'
        >
          {%- include chapter-title.html doc=item -%}
        </a>
      </li>
    {%- endfor -%}
  </ul>

  {%- include footer.html -%}
</div>
