main > .highlight,
main > .highlighter-rouge {
  @apply -ml-4 lg:-ml-6 xl:-ml-8 -mr-4 lg:-mr-6 xl:-mr-8;
}

main * pre.highlight {
  @apply my-0;
}

main a:not(.btn):not(.no-hover) {
  @apply hover:text-accent;
}

main blockquote {
  @apply p-2 text-base-content border border-amber-400 dark:border-amber-300/50 rounded-xl text-center font-serif;
}

main blockquote p {
  @apply m-0;
}

main blockquote a {
  @apply text-base-content;
}

ul.legend {
  @apply m-0 p-0 list-none flex flex-col gap-2;

  & li {
    @apply m-0 py-0 pr-0 pl-[calc(var(--spacing)*7)] 2xl:pl-[calc(var(--spacing)*10)] flex items-start gap-4;

    & > img.emoji {
      @apply mt-1 size-5 lg:size-6 xl:size-6 2xl:size-7 float-left -ml-[calc(var(--spacing)*7)] 2xl:-ml-[calc(var(--spacing)*10)];
    }
  }
}

main img.emoji {
  @apply size-5 xl:size-6 2xl:size-7;
}

main h2 {
  &:has(> img.emoji) {
    @apply pl-[calc(var(--spacing)*10)] 2xl:pl-[calc(var(--spacing)*13)];
  }

  & > img.emoji {
    @apply size-9 lg:size-9 xl:size-9 2xl:size-11 float-left -ml-[calc(var(--spacing)*10)] 2xl:-ml-[calc(var(--spacing)*13)];
  }
}

main h3 {
  &:has(> img.emoji) {
    @apply pl-[calc(var(--spacing)*9)] 2xl:pl-[calc(var(--spacing)*12)];
  }

  & > img.emoji {
    @apply size-8 lg:size-8 xl:size-8 2xl:size-10 float-left -ml-[calc(var(--spacing)*9)] 2xl:-ml-[calc(var(--spacing)*12)];
  }
}

main h4,
main h5,
main h6 {
  &:has(> img.emoji) {
    @apply pl-[calc(var(--spacing)*7)] 2xl:pl-[calc(var(--spacing)*10)];
  }

  & > img.emoji {
    @apply size-6 lg:size-6 xl:size-6 2xl:size-8 float-left -ml-[calc(var(--spacing)*7)] 2xl:-ml-[calc(var(--spacing)*10)];
  }
}

main .note {
  @apply my-5 border-l-4 border-gray-600/50 dark:border-gray-400/50 px-4 py-2 screen:bg-linear-to-r screen:from-gray-600/5 screen:to-gray-600/1 dark:screen:from-gray-400/5 dark:screen:to-gray-400/1 flex flex-col gap-2;

  .title {
    @apply flex items-center gap-2 font-bold text-gray-600 dark:text-gray-400;
  }

  &.note-advanced {
    @apply border-accent/50 from-accent/10 dark:from-accent/5 to-accent/1;
    .title {
      @apply text-accent;
    }
  }

  &.note-more {
    @apply border-success/50 from-success/10 dark:from-success/5 to-success/1;
    .title {
      @apply text-success;
    }
  }

  &.note-tip {
    @apply border-info/50 from-info/10 dark:from-info/5 to-info/1;
    .title {
      @apply text-info;
    }
  }

  &.note-troubleshooting {
    @apply border-error/50 from-error/10 dark:from-error/5 to-error/1;
    .title {
      @apply text-error;
    }
  }

  &.note-warning {
    @apply border-warning/50 from-warning/10 dark:from-warning/5 to-warning/1;
    .title {
      @apply text-warning;
    }
  }

  & .highlighter-rouge:last-child pre.highlight {
    @apply mb-2;
  }
}

main .note .content > :first-child {
  @apply mt-0;
}

main .note .content > :last-child {
  @apply mb-0;
}

main .solution {
  @apply my-5;
}

main .solution pre.highlight {
  @apply -mx-4;
}

main .solution .highlighter-rouge:first-child pre.highlight {
  @apply mt-0 rounded-t-none;
}

main .solution .highlighter-rouge:last-child pre.highlight {
  @apply -mb-4;
}

.callout {
  @apply shadow-lg print:shadow-none print:border print:border-black print:rounded-xl p-4 relative md:before:content-[''] md:before:size-2 lg:before:size-3 md:before:-top-2 lg:before:-top-3 md:before:absolute md:before:border-[0.25rem] lg:before:border-[0.375rem] md:before:border-solid md:before:border-white;
  @apply my-5 text-white print:text-black;
  @apply flex items-start gap-4;

  & strong {
    @apply font-bold text-yellow-200;
  }

  &.callout-exercise strong {
    @apply font-bold text-orange-300;
  }

  &.callout-more strong {
    @apply font-bold text-red-800/50 dark:text-red-800/65 group-has-checked/callout:text-red-300 group-has-[#always-tell-me-more]/body:text-red-300;
  }

  &.callout-warning strong {
    @apply font-bold text-blue-200;
  }

  &.callout-more {
    @apply md:ml-[10%] lg:ml-[15%] has-checked:ml-0 group-has-[#always-tell-me-more]/body:ml-0 -mr-4 md:-mr-6 lg:-mr-9 xl:-mr-11 print:mr-0 rounded-tl-lg rounded-bl-lg md:before:right-0 md:before:border-t-transparent md:before:border-r-transparent;
  }

  &:not(.callout-more) {
    @apply -ml-4 md:-ml-6 lg:-ml-9 xl:-ml-11 print:ml-0 rounded-tr-lg rounded-br-lg md:before:left-0 md:before:border-t-transparent md:before:border-l-transparent;
  }

  & .more,
  & .less,
  & .always-tell-me-more,
  & .stop-telling-me-more {
    @apply btn font-title;
  }

  & .more {
    @apply mt-4 btn-xs md:btn-sm text-xs md:text-sm bg-success/50 hover:bg-success/40 border-white/50 text-success-content/75 group-has-checked/callout:hidden group-has-[#always-tell-me-more]/body:hidden print:hidden;
  }

  & .controls {
    @apply print:hidden group-has-checked/callout:mt-4 group-has-[#always-tell-me-more]/body:mt-4 join join-vertical sm:join-horizontal;
  }

  & .less {
    @apply hidden group-has-checked/callout:inline-flex group-has-[#always-tell-me-more]/body:hidden btn-accent opacity-90 items-center;
  }

  & .always-tell-me-more {
    @apply hidden group-has-checked/callout:inline-flex group-has-[#always-tell-me-more]/body:hidden btn-secondary opacity-90 items-center;
  }

  & .stop-telling-me-more {
    @apply hidden screen:group-has-[#always-tell-me-more]/body:inline-flex btn-secondary btn-xs md:btn-sm text-xs md:text-sm items-center;
  }
}

.callout .container {
  @apply flex flex-col items-end group-has-checked/callout:items-center group-has-[#always-tell-me-more]/body:items-end;
}

.callout .icon {
  @apply size-6 md:size-10 shrink-0;
}

.callout .icon.text {
  @apply text-white text-[2rem] leading-10 text-center;
}

.callout .icon.image > img.emoji {
  @apply size-full !my-0;
}

.callout.callout-more .content {
  @apply screen:line-clamp-3 peer-checked:line-clamp-none group-has-[#always-tell-me-more]/body:line-clamp-none;
}

.callout .content {
  @apply w-full text-left;
}

.callout .content > * {
  @apply first:mt-0 last:mb-0;
}

.callout-danger {
  @apply bg-linear-to-b from-red-700 to-red-900 md:before:border-r-red-700/50 md:before:border-b-red-700/50;
}

.callout-exercise {
  @apply bg-linear-to-b from-indigo-600 to-indigo-800 md:before:border-r-indigo-600/50 md:before:border-b-indigo-600/50;
}

.callout-more {
  @apply bg-linear-to-b from-success/65 to-success/50 md:before:border-l-success/40 md:before:border-b-success/40 text-success-content;
  @apply has-checked:from-emerald-700 has-checked:to-emerald-900 has-checked:md:before:border-l-emerald-700/50 has-checked:md:before:border-b-emerald-700/50 has-checked:text-white print:has-checked:text-black;
  @apply group-has-[#always-tell-me-more]/body:from-emerald-700 group-has-[#always-tell-me-more]/body:to-emerald-900 group-has-[#always-tell-me-more]/body:md:before:border-l-emerald-700/50 group-has-[#always-tell-me-more]/body:md:before:border-b-emerald-700/50 group-has-[#always-tell-me-more]/body:text-white print:group-has-[#always-tell-me-more]/body:text-black;
}

.callout-warning {
  @apply bg-linear-to-b from-yellow-600 to-yellow-800 md:before:border-r-yellow-600/50 md:before:border-b-yellow-600/50;
}

.callout.animate {
  @apply screen:animate-pulse;
  & .icon {
    @apply screen:animate-spin;
  }
}

.markdown {
  & > * {
    @apply first:mt-0 last:mb-0;
  }
}

#course-material-menu {
  .course-section-done {
    @apply border-r-4 border-success/50 hover:border-success;
  }

  .course-section-next {
    @apply border-r-4 border-info/50 hover:border-info;
  }

  .course-item-done {
    @apply border-r-4 border-success/50 hover:border-success;
  }

  .course-item-due {
    @apply border-r-4 border-warning/85 hover:border-warning;
  }

  .course-item-next {
    @apply border-r-4 border-info/50 hover:border-info;
  }

  .course-item-future {
    @apply opacity-25 hover:opacity-100;
  }
}

.cols {
  & > div > * {
    @apply first:mt-0 last:mb-0;

    &:first-child > img {
      @apply mt-0;
    }

    &:last-child > img {
      @apply mb-0;
    }
  }
}
